/*! Thrive Architect - 2021-09-01
* http://www.thrivethemes.com/
* Copyright (c) 2021 Thrive Themes */

"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(d){var p,u,n,v,h,i={".js":[],".json":[],".css":[],".html":[]},c="function"==typeof require?require:null;return v=function(t){var e=new Error("Could not find module '"+t+"'");return e.code="MODULE_NOT_FOUND",e},h=function(t,e,a){var r,n;if("function"==typeof t[e+a])return e+a;for(r=0;n=i[a][r];++r)if("function"==typeof t[e+n])return e+n;return null},p=function(t,e,a,r,n,i){var o,s,d,c,l,f;for("."!==(o=(a=a.split("/")).pop())&&".."!==o||(a.push(o),o="");null!=(s=a.shift());)if(s&&"."!==s&&(".."===s?(t=e.pop(),i=i.slice(0,i.lastIndexOf("/"))):(e.push(t),t=t[s],i+="/"+s),!t))throw v(r);if(o&&"function"!=typeof t[o]&&((f=(f=(f=(f=h(t,o,".js"))||h(t,o,".json"))||h(t,o,".css"))||h(t,o,".html"))?o=f:2!==n&&"object"===_typeof(t[o])&&(e.push(t),t=t[o],i+="/"+o,o="")),!o)return 1!==n&&t[":mainpath:"]?p(t,e,t[":mainpath:"],r,1,i):p(t,e,"index",r,2,i);if(!(l=t[o]))throw v(r);return l.hasOwnProperty("module")?l.module.exports:(d={},l.module=c={exports:d,id:i+"/"+o},l.call(d,d,c,u(t,e,i)),c.exports)},n=function(t,e,a,r){var n,i=a,o=a.charAt(0),s=0;if("/"===o){if(i=i.slice(1),!(t=d["/"])){if(c)return c(a);throw v(a)}r="/",e=[]}else if("."!==o){if(n=i.split("/",1)[0],!(t=d[n])){if(c)return c(a);throw v(a)}r=n,e=[],(i=i.slice(n.length+1))||(s=(i=t[":mainpath:"])?1:(i="index",2))}return p(t,e,i,a,s,r)},(u=function(e,a,r){return function(t){return n(e,[].concat(a),t,r)}})(d,[],"")}({workspace:{editor:{js:{frontend:{modules:{"lead-generation.js":function(t,e,a){void 0===TCB_Front.js_modules["lead-generation"]&&TCB_Front.setModuleLoadedStatus("lead-generation",!1),function(O){if(!TCB_Front.isModuleLoaded("lead-generation")){O(window).on("tcb_after_dom_ready",function(){var t=O(TCB_Front.Utils.isEditorPage()?"#tve_editor":"body");q.initRadioInputs(t),q.initCheckboxInputs(t),TCB_Front.Utils.isEditorPage()||(O(".thrv_lead_generation").tve_front_lead_generation(),q.initRecaptcha())});var q={initRadioInputs:function(t){t.off("change.inputradio").on("change.inputradio",".tve_lg_radio_wrapper input",function(t){var e=O(this).closest(".tve_lg_radio_wrapper");e.siblings(".tve-state-expanded").removeClass("tve-state-expanded"),e.addClass("tve-state-expanded")})},initCheckboxInputs:function(t){t.off("change.inputcheckbox").on("change.inputcheckbox",".tve_lg_checkbox_wrapper input",function(t){var e=O(this);e.closest(".tve_lg_checkbox_wrapper").toggleClass("tve-state-expanded",e.prop("checked"))})},initRecaptcha:function(){var e=O(".tve-captcha-container");if(e.length){var t=function t(){"undefined"!=typeof grecaptcha&&grecaptcha.render?function(){var a=100;e.filter(":not(.tve-recapcha-rendered)").each(function(){this.id=this.id+"-"+ ++a;var t=O(this),e=window.innerWidth<400?"compact":t.attr("data-size");t.addClass("tve-recaptcha-rendered"),t.data("grecaptcha-render")||tve_dash_front.recaptcha.connection&&(!tve_dash_front.recaptcha.connection||"v3"===tve_dash_front.recaptcha.connection.version)||(t.data("grecaptcha-render",!0),grecaptcha.render(this.id,{sitekey:tve_dash_front.recaptcha.site_key||t.attr("data-site-key"),theme:t.attr("data-theme"),type:t.attr("data-type"),size:e}))})}():setTimeout(t,50)},a=!1,r=tve_dash_front.recaptcha.connection&&"v3"===tve_dash_front.recaptcha.connection.version&&!tve_dash_front.recaptcha.connection.browsing_history?tve_dash_front.recaptcha.site_key:"explicit";window.tve_gapi_loaded||(O.getScript("https://www.google.com/recaptcha/api.js?render="+r,t),a=!0,window.tve_gapi_loaded=!0),a||t()}},hasFileUpload:function(){return TCB_Front.isModuleLoaded("file-upload")}};O.fn.tve_front_lead_generation=function(){var n=this,L=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return window.TCB_PAGE_INDEX=window.TCB_PAGE_INDEX||1,this.each(function(t,e){var x=O(e),C=x.find("form"),a=C.find(".tve-f-a-hidden").val();if(0===C.length&&(x.find(".thrv_lead_generation_container").wrapInner('<form method="post"></form>'),C=x.find("form")),C.find(".tve_lg_textarea.tve-lg-show-counter textarea").off("input.textarea").on("input.textarea",function(){var t=O(this),e=t.val().length,a=Number(t.attr("maxlength")),r=Number(t.attr("data-min")),n=t.next().find(".tve-fill-text-dynamic");n.text(a?"".concat(e," of ").concat(a):e),n.toggleClass("tve-counter-error",!!(e&&r&&e<r))}),C.find('input[type="checkbox"],input[type="radio"]').each(function(){if(!this.id)return!0;O("#"+this.id).not(this).length&&(this.id=this.id+"-"+window.TCB_PAGE_INDEX++,O(this).next("label").attr("for",this.id))}),void 0!==a&&"#"===C.attr("action")&&C.attr("action",a),x.data("tve_lg_done"))return n;if(x.data("tve_lg_done",!0),void 0!==window.SegMet&&SegMet&&-1!==C[0].action.indexOf("infusionsoft")&&!C.data("tve-segmet-submit")){C.data("tve-segmet-submit",1);var r=C[0].submit;C[0].submit=function(){return C.data("tve-segmet-submitted")?r.call(C[0]):(C.data("tve-segmet-submitted",1),C.submit())}}var E,T={errClass:"tve-lg-error",errClassMultiple:"tve-lg-error-multiple",init:function(){this.container=C.closest(".thrv_lead_generation").find("#tve-lg-error-container"),this.container.length||(this.container=O('<div id="tve-lg-error-container"></div>').prependTo(C.parent()),this.container.on("click",".tve-lg-err-close",O.proxy(this.close,this))),this.container.empty().hide(),this.clear()},close:function(){this.container.fadeOut(200);var t=C.find("."+this.errClass);return t.length||(t=C.find("input,select,textarea")),t.first().focus(),!1},clear:function(){C.find("input,select,textarea").removeClass(this.errClass),C.find('[class^="tve_lg_"]').removeClass(this.errClassMultiple+" "+this.errClass),"function"==typeof L.clearErrors&&L.clearErrors.apply(this,arguments)},markApiError:function(t,e,a){var r=1<arguments.length&&void 0!==e?e:O(),n=2<arguments.length&&void 0!==a?a:"";return"function"==typeof L.renderError?L.renderError(r,t,n):this.container.append('<div class="tve-lg-err-item tve-lg-ext-err">'+t+"</div>"),this},_markError:function(t,e,a){if("function"==typeof L.renderError)return L.renderError.call(this,t,e,a);if(t){var r=t.parent();r.removeClass("tcb-permanently-hidden"),r.closest("form").find('[data-label-for="'.concat(r.attr("data-label"),'"]')).removeClass("tcb-permanently-hidden"),t.addClass(this.errClass);var n=t.attr("data-field")?t.attr("data-field").replace("mapping_",""):t.attr("type");"gdpr"===n&&(n="checkbox"),["radio","checkbox"].includes(n)?t.closest(".tve_lg_"+n).addClass(this.errClassMultiple):"select"===n&&t.closest(".tve_lg_dropdown").addClass(this.errClass)}"required"===a&&this.container.find(".tve-lg-required").length||this.container.append('<div class="tve-lg-err-item tve-lg-'+a+'">'+e+"</div>")},show:function(){if("function"!=typeof L.renderError){this.container.append('<a href="javascript:void(0)" class="tve-lg-err-close" title="Close"><span class="thrv-icon thrv-svg-icon">'+TCB_Front.icons.get("cross")+"</span></a>");var r=this;setTimeout(function(){var t=C.offset(),e=parseInt(C.css("margin-top")),a=-10-r.container.outerHeight(!0)-(isNaN(e)?0:e);C.parents(".thrv-ribbon").length&&("bottom"===C.parents(".tve-leads-ribbon").attr("data-position")?a+=7:a=t.top+C.outerHeight()),r.container.css({top:a+"px",width:C.outerWidth()}).fadeIn(200)},50)}},phone:function(t,e){return!0},required:function(t,e){var a=!0,r="required";if("radio"===t.attr("type"))a=O('input[name="'+t.attr("name")+'"]').is(":checked");else if("checkbox"===t.attr("type"))a=O('input[name="'+t.attr("name")+'"]').is(":checked");else if(t.is("textarea[data-min]")){var n=O.trim(t.val()).length;!(a=n>=t.attr("data-min"))&&n&&(r="min-chars",e=tve_frontend_options.translations.min_chars.replace("%s",t.attr("data-min")))}else{var i=t.attr("value")?t.attr("value"):t.val();a=0<O.trim(i).length}return!!a||(this._markError(t,e,r),!1)},password:function(t,e){var a=!0;return t.val()||1!==t.data("required")||(a=!1),!!a||(this._markError(t,e,"password"),!1)},mismatch:function(t,e){var a=!0;return t.password&&t.password.val()!==t.confirm_password.val()&&(a=!1),!!a||(this._markError(t.confirm_password,e,"passwordmismatch"),!1)},email:function(t,e){return!!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t.val())||(this._markError(t,e,"email"),!1)},getErrors:function(t){try{return JSON.parse(t.find(".tve-lg-err-msg").val())}catch(t){return{file_extension:"Sorry, {fileextension} files are not allowed",file_size:"{file} exceeds the maximum file size of {filelimit}",required:"Please fill in all of the required fields",phone:"The phone number is not valid",email:"The email address is not valid"}}}};q.hasFileUpload()&&(E=new TCB_Front.FileUpload(x));function F(t,e){var a=O.extend({success:"Sign up successful",error:"Error!"},e),r=C.find("#_form_type").val(),n=C.find("input[name=name]").val()?C.find("input[name=name]").val():"",i=C.find("input[name=email]").val();if(t){C.parents(".tl-style").first().find(".tve_p_lb_close").trigger("click");var o=O.Event("leads_messages.tcb");C.trigger(o),"lead_generation"===r&&(C.find("input").val(""),C.parents(".tve_p_lb_content").find(".tve_p_lb_close").click()),a.success=a.success.replace("[lead_email]",i),a.success=a.success.replace("[lead_name]",n),O("body").slideDown("fast",function(){O("body").prepend('<div class="tvd-toast tve-fe-message"><div class="tve-toast-message"><div class="tve-toast-icon-container"><span class="tve_tick thrv-svg-icon">'+TCB_Front.icons.get("checkmark")+'</span></div><div class="tve-toast-message-container">'+a.success+"</div></div></div>")}),setTimeout(function(){O(".tvd-toast").hide()},6e3)}else{var s=C.parent(),d=s.parent(),c=d.find(".tve-error-wrapper"),l=C.find("#_error_message_option").val();1===parseInt(l)?(s.hide(),0===c.length?(d.append('<div class="tve-error-wrapper"><div class="tve-error-content"></div><button class="tve-close-error-message">Retry</button></div>'),a.error=a.error.replace("[lead_email]",i),a.error=a.error.replace("[lead_name]",n),d.find(".tve-error-content").append(a.error)):d.find(".tve-error-wrapper").show()):location.reload()}C.tve_form_loading(!0)}var B=function(t){return t&&0<t.length?t+",":""},j=function(){var n="";return"true"===C.find(".tve_lg_radio").attr("data-answer-tag")?C.find(".tve_lg_radio input[type=radio]").each(function(t,e){if(e.checked)if(e.attributes["data-custom-tag"]){var a=e.attributes["data-custom-tag"].value;n=0<n.length?n+","+a:a}else{var r=e.value;n=0<n.length?n+","+r:r}}):C.find(".tve_lg_radio input[type=radio]").each(function(t,e){e.checked&&e.attributes["data-custom-tag"]&&(n=e.attributes["data-custom-tag"].value)}),n},U=function(){var n="";return"true"===C.find(".tve_lg_checkbox:not(.tcb-lg-consent)").attr("data-answer-tag")?C.find(".tve_lg_checkbox input[type=checkbox]").each(function(t,e){if(e.checked)if(e.attributes["data-custom-tag"]){var a=e.attributes["data-custom-tag"].value;n=0<n.length?n+","+a:a}else{var r=e.value;n=0<n.length?n+","+r:r}}):C.find(".tve_lg_checkbox input[type=checkbox]").each(function(t,e){if(e.checked&&e.attributes["data-custom-tag"]){var a=e.attributes["data-custom-tag"].value;n=0<n.length?n+","+a:a}}),n},A=function(){var t=C.find(".tve_lg_dropdown"),e=t.find(".tve-lg-dropdown-option.tve-state-active");return"true"===t.attr("data-answer-tag")?e.attr("data-custom-tag")?0<e.length?e.attr("data-custom-tag"):"":0<e.length?e.attr("data-value"):"":0<e.length?e.attr("data-custom-tag"):""},S=function(r){["activecampaign","aweber","convertkit","drip","klicktipp","mailchimp","sendlane","zapier"].forEach(function(t){var e=C.find("input[type=hidden]#".concat(t,"_tags")),a=0<e.length?e.attr("value"):"";e.length&&(0===a.length&&","===r.slice(-1)&&(r=r.slice(0,-1)),a=r.replace(/['"`\\]/g,"")+a,e.attr("value",a))})};x.data("form-target")&&x.data("form-target").length&&x.find("form").attr("target",x.data("form-target")),function(){var t=TCB_Front.queryString.get("affiliate");if(t){var e=O("<input/>");e.attr("type","hidden").attr("name","tve_affiliate").val(t),C.append(e)}}(),x.find(".tve-lg-err-msg").length&&function(){C.find(".tve_submit_container .thrv_icon").click(function(){C.submit()}),C.find(".tve-form-button .tve-form-button-submit").click(function(t){return t.preventDefault(),t.stopPropagation(),C.submit(),!1});function r(_,t,e){if(C.data("tve-force-submit"))return!0;var a=C.find(".consent-config");a.length&&!a.attr("value")&&"none"!==C.find(".tcb-lg-consent").css("display")&&C.find('[name="user_consent"]').attr("data-required",1);var n=!0,r=O(t),i={};T.init(),r.find("input, select, textarea").each(function(){var t=O(this),e=t.data("validation"),a=parseInt(this.dataset.required),r=t.data("iphone-placeholder");""!==r&&t.val()===r&&t.val(""),"password"===t.attr("type")&&(i[t.attr("name")]=t),1===a&&(T.required(t,k.required)||(n=!1)),void 0!==e&&"none"!==e&&T[e]&&(T[e](t,k[e])||(n=!1))});var o=r.find('textarea[name="g-recaptcha-response"]');if(0<o.length&&(o.first().val()||(T.markApiError("Please validate captcha form",r.find(".tve-captcha-container"),"captcha"),setTimeout(function(){O("#tve-lg-error-container").fadeOut("slow")},5e3),n=!1)),2===Object.keys(i).length&&(T.mismatch(i,k.passwordmismatch)||(n=!1)),q.hasFileUpload()&&E){var s=E.isValid();!0!==s&&(n=!1,T.markApiError(s,E.$el,"upload"))}if(!n)return T.show(),C.find("."+T.errClass).first().focus(),!1;if("function"==typeof L.showFormLoader?L.showFormLoader():C.tve_form_loading(),"api"===C.parents(".thrv_lead_generation").attr("data-connection")||C.parents(".tcb-registration-form").length){var g=C.find("#_autofill").val(),m=g?C.find("input").not("input[type=hidden],input[type=password]").serializeArray():"";if(x.attr("data-settings-id")||function(){var t=j(),e=U(),a=A(),r=B(t)+B(e)+B(a);r.length&&S(r)}(),"function"==typeof L.submitHandler){var d={autofillValues:m,token:e};return q.hasFileUpload()&&E&&(d.uploader=E),L.submitHandler.call(null,_,d)}var b={};O.each(C.serializeArray(),function(t,e){b[e.name]=e.value});var c=C.serialize()+"&action=tve_api_form_submit&url="+encodeURIComponent(location.href),y=C.find("#_submit_option").val();c+="&_tcb_id="+(x.attr("data-settings-id")||"")+"&tcb_token="+(10*Date.now()).toString(32);var l=O.Event("form_conversion.tcb");C.trigger(l),l.post_data&&(c+="&"+O.param(l.post_data));var f=C.closest(".tar-main-content[data-post-id]"),p=f.length?f.attr("data-post-id"):tve_frontend_options.post_id;return p&&(c+="&post_id=".concat(p)),e&&(c+="&g-recaptcha-response="+e),q.hasFileUpload()&&E&&(c=E.appendExtraData(c)),O.ajax({type:"post",xhrFields:{withCredentials:!0},url:tve_frontend_options.ajaxurl,dataType:"json",data:c}).fail(function(){T.markApiError("An error occurred while submitting your data. Please try again").show(),C.tve_form_loading(!0)}).done(function(t){q.hasFileUpload()&&E&&E.clear(),C.find('input[type="password"]').trigger("keyup");var e="";try{var a=t.form_messages||{},r="";if(t.redirect&&(r=t.redirect,delete t.redirect),delete t.form_messages,t.variation){t.variation;delete t.variation}if(t.back_url){t.back_url;delete t.back_url}var n=0<Object.keys(t).length&&!t.error;if("object"===_typeof(t.error_message)&&t.error_message.length){var i=t.error_message,o="";i.forEach(function(t){"string"==typeof t&&t.length&&(t=t.trim(),T.markApiError(t).show(),o+=t+"\n")}),C.tve_form_loading(!0),o.length&&(e=o,TCB_Front.toast(o,!0))}if(t.error){if("captcha"===t.field){var s=k.recaptcha||t.error;T.markApiError(s).show(),C.tve_form_loading(!0)}else F(n,a);return _.preventDefault(),!1}}catch(t){console.log(t)}var d=O.Event("lead_conversion_success.tcb",{form_data:b});if(C.trigger(d),d.content_unlocked&&"message"!==y&&"state"!==y)return _.preventDefault(),!1;var c=C.find("#_error_message_option").val();if(y&&("reload"!==y||!n&&1===c)){if("redirect"===y){var l=C.find("#_back_url").val();if(l=TCB_Front.Utils.addHttp(l),g&&m&&!TCB_Front.Utils.isExternal(l)&&TCB_Front.setCookie("account_create_fields",JSON.stringify(m),{path:"/"}),"1"===C.find("#_sendParams").val()&&(l=TCB_Front.Utils.appendFormParamsToURL(l,C)),l&&TCB_Front.isValidUrl(l)&&(n||1!==c))return void(location.href=l)}else{if("state"===y&&n){var f=TL_Front.parent_state,p=C.find(".tve-switch-state-trigger"),u=-1!==p.attr("data-tcb-events").indexOf("tl_state_lightbox"),v=0<C.parents(".tve_post_lightbox").length;if(p.trigger("click"),C.tve_form_loading(!0),u)if(v)f&&(TL_Front.close_form(f),delete TL_Front.parent_state);else{var h=O.Event("leads_messages.tcb");h.lightbox_state=!0,C.trigger(h)}return void(TL_Front.parent_state&&(C.parents(".tl-style").first().find(".tve_p_lb_close").trigger("click"),delete TL_Front.parent_state))}if("klicktipp-redirect"===y&&n){if(r&&TCB_Front.isValidUrl(r))return void(location.href=r)}else if("page"===y&&n&&back_url&&TCB_Front.isValidUrl(back_url))return void(location.href=back_url)}return O(".tve_p_lb_background.tve_lb_open .tve_p_lb_close").click(),C.find(".tve-state-expanded").removeClass("tve-state-expanded"),C.find(".tve_lg_dropdown").each(function(){var t=O(this),e=t.attr("data-show-placeholder"),a=t.find('[data-default="1"]'),r=a.length?a:t.find(".tve-lg-dropdown-option,.tve-dynamic-dropdown-option").first(),n=t.find("input");e?(t.find(".tve-lg-dropdown-trigger .tve-disabled-text-inner").html(n.attr("data-placeholder")),n.removeAttr("value")):(t.find(".tve-lg-dropdown-trigger .tve-disabled-text-inner").html(r.text()),n.attr("value",r.attr("data-value")))}),0===e.length&&F(n,a),C[0].reset(),C.find("textarea").trigger("input"),C.find('input[type="radio"][data-default="1"], input[type="checkbox"][data-default="1"] ').attr("checked","checked").closest(".tve_lg_radio_wrapper, .tve_lg_checkbox_wrapper").addClass("tve-state-expanded"),TCB_Front.smartComplete.handleSmartComplete(C),!0}location.reload()}).always(function(){"undefined"!=typeof grecaptcha&&"function"==typeof grecaptcha.reset&&(!tve_dash_front.recaptcha.connection||tve_dash_front.recaptcha.connection&&"v3"!==tve_dash_front.recaptcha.connection.version)&&grecaptcha.reset()}),_.stopPropagation(),!1}var u=O.Event("should_submit_form.tcb");if(C.trigger(u),"1"!==C.find("input#_asset_option").val()&&!u.flag_need_data)return!0;var v,h=C.serialize()+"&action=tve_custom_form_submit&email="+function(t){if(t.find('[data-validation="email"]').length)return t.find('[data-validation="email"]').val();var e="";return t.find("input").each(function(){if(this.name&&this.name.match(/email/i))return e=this.value,!1}),e}(C)+"&name="+(v=!1,C.find("input").each(function(){var t=O(this),e=t.attr("placeholder"),a=t.attr("name");if(e&&-1!==e.toLowerCase().indexOf("name")||a&&-1!==a.toLowerCase().indexOf("name"))return v=t,!1}),!1!==v?v.val():""),w=O.Event("form_conversion.tcb");return C.trigger(w),w.post_data&&(h+="&"+O.param(w.post_data)),tve_frontend_options.post_id&&(h+="&post_id="+tve_frontend_options.post_id),O.ajax({type:"post",xhrFields:{withCredentials:!0},url:tve_frontend_options.ajaxurl,data:h}).always(function(t){C.find("input,select,textarea").removeAttr("disabled"),C.find(".tve-form-button").removeClass("tar-disabled"),C.data("tve-force-submit",!0).submit()}),!1}var k=T.getErrors(x);C.on("submit",function(e){var a=this;return O(this).find(".tve-captcha-container").length&&tve_dash_front.recaptcha.connection&&"v3"===tve_dash_front.recaptcha.connection.version?(grecaptcha.ready(function(){grecaptcha.execute(tve_dash_front.recaptcha.site_key,{action:"submit"}).then(function(t){r(e,a,t)})}),!1):r(e,a)})}()})},TCB_Front.setModuleLoadedStatus("lead-generation",!0)}}(ThriveGlobal.$j,TCB_Front)}}}}}}})("workspace/editor/js/frontend/modules/lead-generation");